<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Bharath(yamakira_)">
  
  <title>Mysterious boxes - The Art of Packet Crafting with Scapy!</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Mysterious boxes";
    var mkdocs_page_input_path = "lab_setup/lab_setup.md";
    var mkdocs_page_url = "/lab_setup/lab_setup/index.html";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="icon icon-home"> The Art of Packet Crafting with Scapy!</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Workshop intro</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../index.html">The Art of Packet Crafting with Scapy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../workshop_intro/license/index.html">License</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../workshop_intro/bigger_picture/index.html">Bigger picture</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../workshop_intro/speakers/index.html">Speakers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../workshop_intro/workshop_settings/index.html">Workshop settings</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../workshop_intro/disclaimer/index.html">Disclaimer</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Lab setup</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="index.html">Mysterious boxes</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#mysterious-boxes-lab-setup">Mysterious boxes lab setup</a></li>
                
                    <li><a class="toctree-l4" href="#setting-up">Setting up</a></li>
                
                    <li><a class="toctree-l4" href="#topology">Topology</a></li>
                
                    <li><a class="toctree-l4" href="#the-goal">The Goal</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../network_hunt/index.html">Network Hunt</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Networking</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../networking/layers/index.html">Layers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../networking/socket_interface/index.html">Socket Interface</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../networking/protocols/index.html">Protocols</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../networking/packet_headers/index.html">Packet Headers</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Python</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../python/python/index.html">Python</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Scapy</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/scapy_intro/index.html">Scapy Intro</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/scapy_modes/index.html">Scapy Modes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/scapy_exploring/index.html">Exploring scapy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/creating_packets/index.html">Creating packets</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/inspecting_packets/index.html">Inspecting packets</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/sending_recieving/index.html">Sending & Recieving</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/import_export/index.html">Import & Export data</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../scapy/sniffing/index.html">Sniffing</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Network recon</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_recon/host_discovery/index.html">Host discovery</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_recon/service_discovery/index.html">Service discovery</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_recon/os_detection/index.html">OS detection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_recon/promisc/index.html">Promisc detection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_recon/pcap_analysis/index.html">PCAP Analysis</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_recon/traceroute/index.html">Traceroute</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Network attacks</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_attacks/cam_overflow/index.html">CAM overflow</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../network_attacks/arp_spoofing/index.html">ARP spoofing</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Wireless recon</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../wireless/wireless_recon/index.html">802.11</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Misc libraries</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/netaddr/index.html">netaddr</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../libraries/netifaces/index.html">netifaces</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Exercises</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../exercises/misc_exercises/index.html">Misc exercises</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../exercises/network_hunt/index.html">Network Hunt</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Epilogue</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../epilogue/moving_forward/index.html">Moving forward</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../epilogue/feedback/index.html">Feedback</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">The Art of Packet Crafting with Scapy!</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Lab setup &raquo;</li>
        
      
    
    <li>Mysterious boxes</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/yamakira/art-of-packet-crafting-with-scapy" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="mysterious-boxes-lab-setup">Mysterious boxes lab setup</h1>
<div class="admonition note">
<p>“Give me six hours to chop down a tree and I will spend the first four sharpening the axe.” - Lincoln</p>
</div>
<h2 id="setting-up">Setting up</h2>
<h3 id="directory-tree">Directory tree</h3>
<pre><code>USB
│
└───null-workshop-packet-crafting-oct2016 
    │    
    └─────labs
         │   
         └───mysterious_boxes

              import_labs.sh
              start_labs.sh
              stop_labs.sh
              ...         
              import_labs.bat
              start_labs.bat
              stop_labs.bat
</code></pre>

<p><br/></p>
<p>Follow the guidlines listed below depending on your primary/host OS.</p>
<h3 id="linuxmac">Linux/Mac</h3>
<p><strong>Step I</strong>   </p>
<ul>
<li>Copy the directory <em>&lsquo;null-workshop-packet-crafting-oct2016&rsquo;</em> from USB provided on to your machine.</li>
</ul>
<p><strong>Step II</strong></p>
<ul>
<li>Install Virtualbox(preferably 5.0 or later). Installers are provided in the directory copied.</li>
</ul>
<p><strong>Step III</strong></p>
<ul>
<li><code>cd</code> into the sub-directory <strong>mysterious_boxes_lab</strong>
<br>
<br></li>
<li>
<p>Run the script <strong><code>import_labs.sh</code></strong></p>
<ul>
<li>This script will import all the OVA files needed into your virtualbox.</li>
<li>In the end, this script will display list of all the VMs available in Virtualbox.</li>
<li>If you see <em>victim1, victim2, attacker</em> in the VMs list, the importing is sucessful.
<br>
<br></li>
</ul>
</li>
<li>
<p>Run the script <strong><code>start_labs.sh</code></strong></p>
<ul>
<li>This script will setup and run your lab VMs.</li>
<li>All the victims will run in the background. You&rsquo;ll be displayed only one VM, which will be our attacker.</li>
<li>This script will display all the running VMs.</li>
<li>If you see two victims and an attacker running, you are ready!
<br>
<br></li>
</ul>
</li>
<li>Run the script <strong><code>stop_labs.sh</code></strong> when done with the labs. This will gracefully shutdown all the lab VMs.</li>
</ul>
<h3 id="windows">Windows</h3>
<p><strong>Step I</strong>   </p>
<ul>
<li>Copy the directory <em>&lsquo;null-workshop-packet-crafting-oct2016&rsquo;</em> from USB provided on to your Windows machine.</li>
</ul>
<p><strong>Step II</strong></p>
<ul>
<li>Install Virtualbox(preferably 5.0 or later). Installers are provided in the directory copied.</li>
</ul>
<p><strong>Step III</strong></p>
<ul>
<li><code>cd</code> into the sub-directory <strong>mysterious_boxes_lab</strong>
<br>
<br></li>
<li>
<p>Run the script <strong><code>import_labs.bat</code></strong></p>
<ul>
<li>This script will import all the OVA files needed into your virtualbox.</li>
<li>In the end, this script will display list of all the VMs available in Virtualbox.</li>
<li>If you see <em>victim1, victim2, attacker</em> in the VMs list, the importing is sucessful.
<br>
<br></li>
</ul>
</li>
<li>
<p>Run the script <strong><code>start_labs.bat</code></strong></p>
<ul>
<li>This script will setup and run your lab VMs.</li>
<li>All the victims will run in the background. You&rsquo;ll be displayed only one VM, which will be our attacker.</li>
<li>This script will display all the running VMs.</li>
<li>If you see two victims and an attacker running, you are ready!
<br>
<br></li>
</ul>
</li>
<li>Run the script <strong><code>stop_labs.bat</code></strong> when done with the labs. This will gracefully shutdown all the lab VMs.</li>
</ul>
<h6 id="troubleshootingwindows">Troubleshooting(Windows)</h6>
<ul>
<li>All the scripts assume the virtualbox installation is at <code>C:\Program Files\Oracle\VirtualBox</code>. Incase if the installation is at a different location, edit the following line in script manually to point to the right location.</li>
</ul>
<pre><code class="cmd">PATH=%PATH%;C:\Program Files\Oracle\VirtualBox
</code></pre>

<ul>
<li>All the VMs have host-only interface turned on by default. Windows interface naming convention tend to be inconsistent. Incase you have trouble starting VMs due to network problems, change the interface name in script manually to match your virtualbox interface name.</li>
</ul>
<pre><code>vboxmanage modifyvm &quot;victim1&quot; --nic1 hostonly --hostonlyadapter1 &quot;vboxnet1&quot;
</code></pre>

<h2 id="topology">Topology</h2>
<h3 id="host-machine">Host machine</h3>
<ul>
<li>Host OS is the primary Operating System on which you are running virtualbox</li>
<li>Host OS is on the same sub-net as the VM&rsquo;s</li>
</ul>
<h3 id="attacker-machine">Attacker machine</h3>
<ul>
<li>The VM displayed after starting labs is your attacker.</li>
<li>This is our &lsquo;base box&rsquo; for this workshop from where we orchestrate our attacks.</li>
<li>Pre-configured with all the software neccesary(Scapy, nmap, netdiscover, dsniff, tcpdump&hellip;).</li>
<li>You&rsquo;ll be able to login to this machine using GUI.</li>
</ul>
<h3 id="victim-machines">Victim machines</h3>
<ul>
<li>Bunch of pre-configured VM&rsquo;s.</li>
<li>Configured to run in the background(headless mode).</li>
<li>Various OSs with some listening services and security policies, nothing fancy though.</li>
</ul>
<h2 id="the-goal">The Goal</h2>
<p>To find as much information as we can about the victim machines using Scapy.<br></p>
<ul>
<li>Fingerprinting OSs.<br></li>
<li>Find listening services.<br></li>
<li>Understand security policies.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../network_hunt/index.html" class="btn btn-neutral float-right" title="Network Hunt">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../workshop_intro/disclaimer/index.html" class="btn btn-neutral" title="Disclaimer"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/yamakira/art-of-packet-crafting-with-scapy" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../workshop_intro/disclaimer/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../network_hunt/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
